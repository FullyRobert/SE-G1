<!DOCTYPE html>
<html lang="en" data-textdirection="ltr" class="loading">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
  <meta name="description"
    content="Robust admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
  <meta name="keywords"
    content="admin template, robust admin template, dashboard template, flat admin template, responsive admin template, web app">
  <meta name="author" content="PIXINVENT">
  <title>Basic Forms - Robust Free Bootstrap Admin Template</title>
  <link rel="apple-touch-icon" sizes="60x60" href="../../app-assets/images/ico/apple-icon-60.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../../app-assets/images/ico/apple-icon-76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../../app-assets/images/ico/apple-icon-120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../../app-assets/images/ico/apple-icon-152.png">
  <link rel="shortcut icon" type="image/x-icon" href="../../app-assets/images/ico/favicon.ico">
  <link rel="shortcut icon" type="image/png" href="../../app-assets/images/ico/favicon-32.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <!-- BEGIN VENDOR CSS-->
  <link rel="stylesheet" type="text/css" href="../../app-assets/css/bootstrap.css">
  <!-- font icons-->
  <link rel="stylesheet" type="text/css" href="../../app-assets/fonts/icomoon.css">
  <link rel="stylesheet" type="text/css" href="../../app-assets/fonts/flag-icon-css/css/flag-icon.min.css">
  <link rel="stylesheet" type="text/css" href="../../app-assets/vendors/css/extensions/pace.css">
  <!-- END VENDOR CSS-->
  <!-- BEGIN ROBUST CSS-->
  <link rel="stylesheet" type="text/css" href="../../app-assets/css/bootstrap-extended.css">
  <link rel="stylesheet" type="text/css" href="../../app-assets/css/app.css">
  <link rel="stylesheet" type="text/css" href="../../app-assets/css/colors.css">
  <!-- END ROBUST CSS-->
  <!-- BEGIN Page Level CSS-->
  <link rel="stylesheet" type="text/css" href="../../app-assets/css/core/menu/menu-types/vertical-menu.css">
  <link rel="stylesheet" type="text/css" href="../../app-assets/css/core/menu/menu-types/vertical-overlay-menu.css">
  <!-- END Page Level CSS-->
  <!-- BEGIN Custom CSS-->
  <link rel="stylesheet" type="text/css" href="../../assets/css/style.css">
  <!-- END Custom CSS-->
</head>

<body data-open="click" data-menu="vertical-menu" data-col="2-columns"
  class="vertical-layout vertical-menu 2-columns  fixed-navbar">

  <!-- navbar-fixed-top-->
  <nav class="header-navbar navbar navbar-with-menu navbar-fixed-top navbar-semi-dark navbar-shadow">
    <div class="navbar-wrapper">
      <div class="navbar-header">
        <ul class="nav navbar-nav">
          <!-- <li class="nav-item mobile-menu hidden-md-up float-xs-left"><a class="nav-link nav-menu-main menu-toggle hidden-xs"><i class="icon-menu5 font-large-1">
                  <div class="bs-callout-info callout-border-left mt-1 p-1">
                  <strong>Great Job!</strong>
                  <p>Biscuit macaroon tootsie roll croissant. Dessert candy canes halvah cookie liquorice. Candy canes muffin gummies jujubes brownie. Pie cake pie pastry sugar plum jelly apple pie cotton candy.</p></i>
                </div></a></li> -->
          <!-- <li class="nav-item"><a href="index.ejs" class="navbar-brand nav-link"><img alt="branding logo" src="../app-assets/images/logo/robust-logo-light.png" data-expand="../app-assets/images/logo/robust-logo-light.png" data-collapse="../app-assets/images/logo/robust-logo-small.png" class="brand-logo"></a></li> -->
          <li class="nav-item"><a href="index.ejs" class="navbar-brand nav-link">在线支付系统</a></li>
          <li class="nav-item hidden-md-up float-xs-right"><a data-toggle="collapse" data-target="#navbar-mobile"
              class="nav-link open-navbar-container"><i class="icon-ellipsis pe-2x fa-rotate-90"></i></a></li>
        </ul>
      </div>
      <div class="navbar-container content">
        <div id="navbar-mobile" class="collapse navbar-toggleable-sm">
          <ul class="nav navbar-nav">
            <li class="nav-item hidden-sm-down"><a class="nav-link nav-menu-main menu-toggle hidden-xs"><i
                  class="icon-menu5"></i></a></li>
            <li class="nav-item hidden-sm-down"><a href="#" class="nav-link nav-link-expand"><i
                  class="ficon icon-expand2"></i></a></li>
          </ul>
          <ul class="nav navbar-nav float-xs-right">
            <li class="nav-item">
              <button id="login-btn" class="btn btn-success btn-doc-header" type="button">
                <i class="icon-bag3"></i>
                登陆
              </button></li>
            <li class="nav-item"><a href="account.ejs" target="_blank" class="btn btn-success btn-doc-header"><i
                  class="icon-bag3"></i> 我的</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- ////////////////////////////////////////////////////////////////////////////-->


  <!-- main menu-->
  <div data-scroll-to-active="true" class="main-menu menu-fixed menu-dark menu-accordion menu-shadow">
    <!-- main menu header-->
    <!-- / main menu header-->
    <!-- main menu content-->
    <div class="main-menu-content menu-accordion">
      <ul id="main-menu-navigation" data-menu="menu-navigation" class="navigation navigation-main">
        <li class=" nav-item"><a href="index.ejs"><i class="icon-home3"></i><span data-i18n="nav.dash.main"
                                                                                  class="menu-title">我的账户</span></a>
          <ul class="menu-content">
            <li class="active"><a href="account.ejs" data-i18n="nav.dash.main" class="menu-item">修改信息</a>
            </li>
            <li><a href="change_passwd.ejs" data-i18n="nav.dash.main" class="menu-item">密码找回</a>
            </li>
            <li><a href="balance.ejs" data-i18n="nav.dash.main" class="menu-item">余额与充值</a>
            </li>
            <li><a href="admin.ejs" data-i18n="nav.dash.main" class="menu-item">管理后台</a>
            </li>
          </ul>
        </li>
        </li>
        <li class=" nav-item"><a href="documentation-introduction.ejs"><i class="icon-android-menu"></i><span
              data-i18n="" class="menu-title">在线预定</span></a>
        </li>
        <li class=" nav-item"><a href="transaction.ejs"><i class="icon-folder3"></i><span data-i18n=""
                                                                                          class="menu-title">我的订单</span></a>
        </li>
      </ul>
    </div>
    <!-- /main menu content-->
    <!-- main menu footer-->
    <!-- main menu footer-->
  </div>
  <!-- / main menu-->

  <div class="row">
    <div class="col-md-6 offset-md-3">
      <div class="card">
        <div class="card-header">
          <h4 class="card-title" id="basic-layout-card-center">新建账户</h4>
          <a class="heading-elements-toggle"><i class="icon-ellipsis font-medium-3"></i></a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="icon-minus4"></i></a></li>
              <li><a data-action="reload"><i class="icon-reload"></i></a></li>
              <li><a data-action="expand"><i class="icon-expand2"></i></a></li>
              <li><a data-action="close"><i class="icon-cross2"></i></a></li>
            </ul>
          </div>
        </div>
        <div class="card-body collapse in">
          <div class="card-block">

            <div class="card-text">
              <p>填写这些必要的信息，然后点击“注册”即可新建账号。</p>
            </div>

            <form class="form">
              <div class="row">
                <div class="col-md-6 offset-md-3">
                  <div class="form-body">
                    <div class="form-group">
                      <label for="eventInput1">用户名</label>
                      <input type="text" id="username" class="form-control" placeholder="username" name="fullname">
                    </div>

                    <div class="form-group">
                      <label for="eventInput2">登录密码</label>
                      <input type="password" id="password" class="form-control" placeholder="password" name="title">
                    </div>

                    <div class="form-group">
                      <label for="eventInput3">重复登录密码</label>
                      <input type="password" id="rptpassword" class="form-control" placeholder="repeat password"
                        name="company">
                    </div>

                    <div class="form-group">
                      <label for="eventInput4">支付密码</label>
                      <input type="password" id="paypassword" class="form-control" placeholder="paypassword"
                        name="emailAddr">
                    </div>

                    <div class="form-group">
                      <label for="eventInput5">重复支付密码</label>
                      <input type="password" id="rptpaypassword" class="form-control" name="contact"
                        placeholder="repeat paypassword">
                    </div>

                    <div class="form-group">
                      <label for="eventInput4">电子邮箱</label>
                      <input type="email" id="emailAddr" class="form-control" placeholder="emailAddr" name="email">
                    </div>

                    <div class="form-group">
                      <label for="eventInput5">手机号码</label>
                      <input type="tel" id="phoneNumber" class="form-control" name="contact" placeholder="phone number">
                    </div>

                    <div class="form-group">
                      <label for="eventInput5">真实姓名</label>
                      <input type="text" id="realName" class="form-control" name="contact" placeholder="real name">
                    </div>
                    <div class="form-group">
                      <label for="eventInput5">证件号码</label>
                      <input type="text" id="licenseNumber" class="form-control" name="contact"
                        placeholder="lisence number">
                    </div>

                    <div class="form-group">
                      <label for="eventInput5">出生日期</label>
                      <input type="date" id="dateOfBirth" class="form-control" name="contact"
                        placeholder="date of birth">
                    </div>

                    <div class="form-group">
                      <label>用户类型</label>
                      <div class="input-group">
                        <label class="display-inline-block custom-control custom-radio ml-1">
                          <input type="radio" id="typeOfUser" name="customer1" value="Buy" checked
                            class="custom-control-input">
                          <span class="custom-control-indicator"></span>
                          <span class="custom-control-description ml-0">我要买东西</span>
                        </label>
                        <label class="display-inline-block custom-control custom-radio">
                          <input type="radio" id="typeOfUser" name="customer1" value="Sell"
                            class="custom-control-input">
                          <span class="custom-control-indicator"></span>
                          <span class="custom-control-description ml-0">我要卖东西</span>
                        </label>
                        <label class="display-inline-block custom-control custom-radio">
                          <input type="radio" id="typeOfUser" name="customer1" value="Admin"
                            class="custom-control-input">
                          <span class="custom-control-indicator"></span>
                          <span class="custom-control-description ml-0">我要成为管理员</span>
                        </label>
                      </div>
                    </div>

                  </div>
                </div>
              </div>

              <div class="form-actions center">
                <button type="button" class="btn btn-warning mr-1" id="cancle">
                  <i class="icon-cross2"></i> 取消
                </button>
                <button type="button" class="btn btn-primary" id="submit">
                  <i class="icon-check2"></i> 提交
                </button>
              </div>
            </form>

          </div>
        </div>
      </div>
    </div>
  </div>
  </section>
  <!-- // Basic form layout section end -->
  </div>
  </div>
  </div>
  <!-- ////////////////////////////////////////////////////////////////////////////-->


  <footer class="footer footer-static footer-light navbar-border">
    <p class="clearfix text-muted text-sm-center mb-0 px-2"><span
        class="float-md-left d-xs-block d-md-inline-block">Copyright &copy; 2017 <a
          href="https://themeforest.net/user/pixinvent/portfolio?ref=pixinvent" target="_blank"
          class="text-bold-800 grey darken-2">PIXINVENT </a>, All rights reserved. </span><span
        class="float-md-right d-xs-block d-md-inline-block">Hand-crafted & Made with <i
          class="icon-heart5 pink"></i></span></p>
  </footer>

  <!-- BEGIN VENDOR JS-->
  <script src="../../app-assets/js/core/libraries/jquery.min.js" type="text/javascript"></script>
  <script src="../../app-assets/vendors/js/ui/tether.min.js" type="text/javascript"></script>
  <script src="../../app-assets/js/core/libraries/bootstrap.min.js" type="text/javascript"></script>
  <script src="../../app-assets/vendors/js/ui/perfect-scrollbar.jquery.min.js" type="text/javascript"></script>
  <script src="../../app-assets/vendors/js/ui/unison.min.js" type="text/javascript"></script>
  <script src="../../app-assets/vendors/js/ui/blockUI.min.js" type="text/javascript"></script>
  <script src="../../app-assets/vendors/js/ui/jquery.matchHeight-min.js" type="text/javascript"></script>
  <script src="../../app-assets/vendors/js/ui/screenfull.min.js" type="text/javascript"></script>
  <script src="../../app-assets/vendors/js/extensions/pace.min.js" type="text/javascript"></script>
  <!-- BEGIN VENDOR JS-->
  <!-- BEGIN PAGE VENDOR JS-->
  <!-- END PAGE VENDOR JS-->
  <!-- BEGIN ROBUST JS-->
  <script src="../../app-assets/js/core/app-menu.js" type="text/javascript"></script>
  <script src="../../app-assets/js/core/app.js" type="text/javascript"></script>
  <!-- END ROBUST JS-->
  <!-- BEGIN PAGE LEVEL JS-->
  <!-- END PAGE LEVEL JS-->
  <script type="text/javascript">
    $(document).ready(function () {
    });
    $("#submit").click(function () {
      if ($("#password").val() != $("#rptpassword").val()) {
        alert("登录密码不匹配");
        return;
      }
      if ($("#paypassword").val() != $("#rptpaypassword").val()) {
        alert("支付密码不匹配");
        return;
      }
      let a = $("#username").val();
      let b = $("#password").val();
      let c = $("#paypassword").val();
      let d = $("#emailAddr").val();
      let e = $("#phoneNumber").val();
      let f = $("#realName").val();
      let g = $("#licenseNumber").val();
      let h = $("#dateOfBirth").val();
      let i = $("#typeOfUser").val();

      if(a.length>15)
      {
        alert("用户名过长");
        return ;
      }

      if(b.length>30 || c.length>30)
      {
        alert("登录密码或支付密码过长");
        return ;
      }

      if(! /^[a-zA-Z0-9_]+?@[a-zA-Z0-9_]+?(\.[a-zA-Z0-9_]+?)+$/.test(d))
      {
        alert("邮箱地址不合法");
        return ;
      }

      if(e[0]!='1' || e.length!=11)
      {
        alert("手机号不合法");
        return ;
      }

      if(h.substr(0,4)+h.substr(5,2)+h.substr(8,2)!=g.substr(6,8))
      {
        alert("出生日期与证件不符");
        return ;
      }

      var tempres=0;
      $.ajax({
        dataType: "JSON",
        data: { cardid:g },
        url: "/checkcardid",
        type: "POST",
        async: false,
        success: function (data) {
          tempres=data.status;
        }
      });
      if(!tempres)
      {
        alert("证件号码不合法");
        return ;
      }

      $.ajax({
        dataType: "JSON",
        data: {
          username: a,
          password: b,
          paypassword: c,
          emailAddr: d,
          phoneNumber: e,
          realName: f,
          licenseNumber: g,
          dateOfBirth: h,
          typeOfUser: i
        },
        url: "/register",
        type: "POST",
        success: function (data) {
          if (data.status == 1) {
            alert("注册成功");
            window.location.href = "login.ejs";
          }
          else if (data.status == 0) {
            alert("您填写的个人信息不完整");
          }
          else if (data.status == -1) {
            alert("未知错误");
          }
        }
      });
    });

  </script>
  <script type="text/javascript">
    $(document).ready(function () {
      if (sessionStorage.getItem('loggedIn'))
        document.getElementById("login-btn").innerHTML = "<i class=\"icon-bag3\"></i> 退出";
      else
        document.getElementById("login-btn").innerHTML = "<i class=\"icon-bag3\"></i> 登录";
    })
    $("#login-btn").click(function () {
      if (sessionStorage.getItem('loggedIn'))
        $.post("/exit", function (data) {
          if (data.status == 1) {
            alert("登出成功");
            sessionStorage.clear();
            window.location.href = "login.ejs";
          }
          if (data.status == 0) alert("登出失败");
        });
      else
        window.location.href = "login.ejs";
    });
  </script>
</body>

</html>